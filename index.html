<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>IP-Insight | Professional IP Geolocation</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/lucide@latest"></script>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&display=swap');
        body { font-family: 'Inter', sans-serif; background: #0b0e14; color: #e2e8f0; }
        .glass-card { background: rgba(23, 27, 34, 0.8); backdrop-filter: blur(16px); border: 1px solid rgba(255, 255, 255, 0.08); }
        .stat-label { font-size: 0.75rem; text-transform: uppercase; letter-spacing: 0.05em; color: #94a3b8; margin-bottom: 0.25rem; }
        #map { height: 300px; border-radius: 1rem; border: 1px solid rgba(255, 255, 255, 0.1); }
    </style>
</head>
<body class="min-h-screen flex flex-col">

    <nav class="border-b border-white/5 bg-[#0b0e14]/80 sticky top-0 z-50 backdrop-blur-md">
        <div class="max-w-7xl mx-auto px-6 h-16 flex items-center justify-between">
            <div class="flex items-center gap-2 text-xl font-bold tracking-tight">
                <i data-lucide="crosshair" class="text-blue-500"></i> IP-INSIGHT
            </div>
            <div class="flex items-center gap-4">
                <input id="search-input" type="text" placeholder="Search any IP..." class="bg-white/5 border border-white/10 rounded-lg px-4 py-1.5 text-sm focus:outline-none focus:border-blue-500 transition w-40 md:w-64">
                <button onclick="lookupIP()" class="bg-blue-600 hover:bg-blue-500 px-4 py-1.5 rounded-lg text-sm font-semibold transition">Lookup</button>
            </div>
        </div>
    </nav>

    <main class="flex-grow max-w-7xl mx-auto w-full px-6 py-12">
        <div class="grid lg:grid-cols-3 gap-8">
            
            <div class="lg:col-span-2 space-y-8">
                <div class="glass-card rounded-3xl p-8 shadow-2xl">
                    <div class="flex justify-between items-start mb-8">
                        <div>
                            <h2 class="stat-label">Your Connection Identity</h2>
                            <h1 id="ip-address" class="text-4xl md:text-5xl font-mono font-bold text-white tracking-tight">Detecting...</h1>
                        </div>
                        <span id="proxy-badge" class="hidden px-3 py-1 rounded-full text-xs font-bold bg-red-500/20 text-red-400 border border-red-500/30">VPN/Proxy</span>
                    </div>

                    <div class="grid grid-cols-2 md:grid-cols-4 gap-6">
                        <div><p class="stat-label">Location</p><p id="location" class="font-semibold">—</p></div>
                        <div><p class="stat-label">Timezone</p><p id="timezone" class="font-semibold">—</p></div>
                        <div><p class="stat-label">ISP / Org</p><p id="isp" class="font-semibold">—</p></div>
                        <div><p class="stat-label">Postal</p><p id="postal" class="font-semibold">—</p></div>
                    </div>
                </div>

                <div id="map" class="shadow-2xl"></div>
            </div>

            <div class="space-y-6">
                <div class="glass-card rounded-2xl p-6">
                    <h3 class="font-bold mb-4 flex items-center gap-2"><i data-lucide="shield" class="w-4 h-4 text-green-400"></i> Security Check</h3>
                    <div class="space-y-3 text-sm">
                        <div class="flex justify-between border-b border-white/5 pb-2"><span>Connection Type</span><span class="text-gray-400">Broadband</span></div>
                        <div class="flex justify-between border-b border-white/5 pb-2"><span>Privacy Mask</span><span id="privacy-status" class="text-green-400">Clear</span></div>
                        <div class="flex justify-between"><span>Hostname</span><span id="hostname" class="text-gray-400 text-right truncate w-32">—</span></div>
                    </div>
                </div>

                <div class="glass-card rounded-2xl p-6 bg-blue-600/5 border-blue-500/20">
                    <h3 class="font-bold mb-2">Pro API Access</h3>
                    <p class="text-xs text-gray-400 mb-4">Integrate this data into your own applications with our high-speed JSON API.</p>
                    <button class="w-full bg-white text-black py-2 rounded-xl text-sm font-bold hover:bg-gray-200 transition">Get API Key</button>
                </div>
            </div>
        </div>
    </main>

    <footer class="py-10 text-center text-gray-600 text-xs border-t border-white/5">
        <p>Data provided by IPinfo.io • Map by OpenStreetMap</p>
    </footer>

    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    <script>
        // Initialize Icons
        lucide.createIcons();

        // Map Initialization
        let map = L.map('map').setView([0, 0], 2);
        L.tileLayer('https://{s}.basemaps.cartocdn.com/dark_all/{z}/{x}/{y}{r}.png', {
            attribution: '&copy; CartoDB'
        }).addTo(map);
        let marker = L.marker([0, 0]).addTo(map);

        async function updateUI(data) {
            document.getElementById('ip-address').innerText = data.ip;
            document.getElementById('location').innerText = `${data.city}, ${data.region} (${data.country})`;
            document.getElementById('timezone').innerText = data.timezone;
            document.getElementById('isp').innerText = data.org || 'Unknown';
            document.getElementById('postal').innerText = data.postal || 'N/A';
            document.getElementById('hostname').innerText = data.hostname || 'None';

            // Update Map
            if (data.loc) {
                const [lat, lon] = data.loc.split(',');
                const coords = [parseFloat(lat), parseFloat(lon)];
                map.setView(coords, 12);
                marker.setLatLng(coords);
            }
        }

        async function lookupIP(target = "") {
            const query = target || document.getElementById('search-input').value;
            const url = query ? `https://ipinfo.io/${query}/json` : `https://ipinfo.io/json`;
            
            try {
                const response = await fetch(url);
                const data = await response.json();
                updateUI(data);
            } catch (error) {
                alert("Could not fetch IP data. Please check the IP format.");
            }
        }

        // Initial Load
        lookupIP();
    </script>
</body>
</html>
